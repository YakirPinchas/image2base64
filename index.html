<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Image to Base64 & Base64 to Image Converter Online - No Upload, Resize & Watermark</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta
    name="description"
    content="Free online Image to Base64 and Base64 to Image converter. Fast, secure and runs fully in your browser ‚Äì no files are uploaded to any server. Includes resize, quality control, and watermark options."
  />
  <style>
    :root {
      --bg: #0f172a;
      --bg-soft: #111827;
      --accent: #38bdf8;
      --accent-soft: rgba(56, 189, 248, 0.15);
      --text: #e5e7eb;
      --muted: #9ca3af;
      --danger: #f97373;
      --radius: 16px;
    }

    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      margin: 0;
      min-height: 100vh;
      background: radial-gradient(circle at top, #1f2937 0, #020617 55%);
      color: var(--text);
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 24px;
    }

    .container {
      width: 100%;
      max-width: 960px;
      background: linear-gradient(145deg, #020617, #020617ee);
      border-radius: 24px;
      border: 1px solid rgba(148, 163, 184, 0.3);
      box-shadow:
        0 24px 80px rgba(15, 23, 42, 0.9),
        0 0 0 1px rgba(15, 23, 42, 0.9);
      padding: 24px 20px 28px;
      animation: fadeIn 0.35s ease-out;
    }

    @media (min-width: 768px) {
      .container {
        padding: 28px 32px 32px;
      }
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .header {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 20px;
    }

    .title-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
    }

    h1 {
      margin: 0;
      font-size: 1.8rem;
      letter-spacing: 0.03em;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    h1 span.logo-pill {
      background: var(--accent-soft);
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--accent);
      border: 1px solid rgba(56, 189, 248, 0.5);
    }

    .subtitle {
      margin: 0;
      font-size: 0.95rem;
      color: var(--muted);
      max-width: 580px;
    }

    .header-tagline {
      font-size: 0.8rem;
      color: var(--muted);
      opacity: 0.9;
    }

    .features-list {
      display: flex;
      flex-wrap: wrap;
      gap: 10px 18px;
      margin-top: 6px;
      font-size: 0.8rem;
      color: var(--muted);
    }

    .features-list span::before {
      content: "‚Ä¢";
      margin-right: 4px;
      color: var(--accent);
    }

    .pill-badge {
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(34, 197, 94, 0.15);
      color: #bbf7d0;
      font-size: 0.75rem;
      border: 1px solid rgba(34, 197, 94, 0.4);
    }

    .waitlist-wrapper {
      margin-top: 10px;
      padding: 10px 12px;
      border-radius: 14px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(55, 65, 81, 0.9);
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
    }

    .waitlist-text {
      font-size: 0.78rem;
      color: var(--muted);
      max-width: 320px;
    }

    .waitlist-text span {
      color: var(--accent);
      font-weight: 500;
    }

    .waitlist-form {
      display: flex;
      flex-wrap: nowrap;
      gap: 6px;
      align-items: center;
    }

    .waitlist-input {
      border-radius: 999px;
      border: 1px solid rgba(75, 85, 99, 0.9);
      background: rgba(15, 23, 42, 0.95);
      color: var(--text);
      padding: 6px 10px;
      font-size: 0.8rem;
      min-width: 210px;
      outline: none;
    }

    .waitlist-input::placeholder {
      color: #6b7280;
    }

    .waitlist-input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.45);
    }

    .waitlist-small {
      font-size: 0.7rem;
      color: var(--muted);
      margin-top: 2px;
    }

    @media (max-width: 640px) {
      .waitlist-wrapper {
        flex-direction: column;
        align-items: flex-start;
      }
      .waitlist-form {
        width: 100%;
      }
      .waitlist-input {
        flex: 1;
        min-width: 0;
      }
    }

    .mode-toggle {
      display: inline-flex;
      background: var(--bg-soft);
      border-radius: 999px;
      padding: 4px;
      border: 1px solid rgba(75, 85, 99, 0.7);
      margin-bottom: 16px;
      margin-top: 10px;
    }

    .mode-button {
      flex: 1;
      border: none;
      border-radius: 999px;
      padding: 6px 16px;
      font-size: 0.86rem;
      cursor: pointer;
      color: var(--muted);
      background: transparent;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      transition:
        background 0.15s ease,
        color 0.15s ease,
        transform 0.06s ease,
        box-shadow 0.12s ease;
      white-space: nowrap;
    }

    .mode-button.active {
      background: radial-gradient(circle at top, rgba(56, 189, 248, 0.25) 0, rgba(15, 23, 42, 0.9) 55%);
      color: var(--text);
      transform: translateY(-1px);
      box-shadow:
        0 0 0 1px rgba(56, 189, 248, 0.6),
        0 6px 16px rgba(15, 23, 42, 0.8);
      font-weight: 600;
    }

    .grid {
      display: grid;
      grid-template-columns: 1.1fr 1.1fr;
      gap: 16px;
    }

    @media (max-width: 768px) {
      .grid {
        grid-template-columns: 1fr;
      }
    }

    .card {
      background: radial-gradient(circle at top left, rgba(56, 189, 248, 0.07) 0, var(--bg-soft) 55%);
      border-radius: var(--radius);
      border: 1px solid rgba(75, 85, 99, 0.9);
      padding: 14px 14px 16px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      animation: cardIn 0.35s ease-out;
    }

    @keyframes cardIn {
      from {
        opacity: 0;
        transform: translateY(8px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      font-size: 0.9rem;
    }

    .card-header small {
      color: var(--muted);
      font-size: 0.78rem;
    }

    .upload-area {
      border-radius: 12px;
      border: 1px dashed rgba(148, 163, 184, 0.7);
      padding: 16px;
      text-align: center;
      background: rgba(15, 23, 42, 0.85);
      cursor: pointer;
      transition: background 0.15s ease, border-color 0.15s ease, transform 0.06s ease, box-shadow 0.12s ease;
    }

    .upload-area:hover {
      background: rgba(15, 23, 42, 1);
      border-color: var(--accent);
      transform: translateY(-1px);
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.25);
    }

    .options-row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 10px;
      margin-bottom: 4px;
      align-items: flex-end;
    }

    .option {
      flex: 1;
      min-width: 150px;
    }

    .option label {
      display: block;
      font-size: 0.78rem;
      color: var(--muted);
      margin-bottom: 4px;
    }

    select,
    input[type="range"] {
      width: 100%;
    }

    select {
      border-radius: 999px;
      border: 1px solid rgba(75, 85, 99, 0.8);
      background: rgba(15, 23, 42, 0.92);
      color: var(--text);
      padding: 4px 10px;
      font-size: 0.8rem;
      outline: none;
    }

    select:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.4);
    }

    input[type="range"] {
      accent-color: var(--accent);
    }

    .advanced-toggle {
      display: flex;
      justify-content: flex-end;
      flex: 1;
      min-width: 120px;
    }

    .advanced-toggle button {
      font-size: 0.76rem;
    }

    .advanced-options {
      margin-top: 6px;
      padding: 8px 10px;
      border-radius: 12px;
      border: 1px dashed rgba(75, 85, 99, 0.8);
      background: rgba(15, 23, 42, 0.7);
      display: none;
      flex-wrap: wrap;
      gap: 10px;
    }

    .advanced-options.visible {
      display: flex;
      animation: fadeIn 0.25s ease-out;
    }

    .advanced-options .option {
      min-width: 140px;
    }

    .advanced-small-input {
      width: 100%;
      border-radius: 999px;
      border: 1px solid rgba(75, 85, 99, 0.9);
      background: rgba(15, 23, 42, 0.92);
      color: var(--text);
      padding: 4px 9px;
      font-size: 0.78rem;
      outline: none;
    }

    .advanced-small-input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.4);
    }

    .preview-wrapper {
      border-radius: 12px;
      background: rgba(15, 23, 42, 0.92);
      border: 1px solid rgba(75, 85, 99, 0.8);
      padding: 10px;
      min-height: 220px;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      position: relative;
    }

    .preview-wrapper img {
      max-width: 100%;
      max-height: 280px;
      border-radius: 10px;
      object-fit: contain;
      transition: transform 0.15s ease;
      cursor: zoom-in;
    }

    .preview-wrapper img.zoomed {
      transform: scale(1.4);
      cursor: zoom-out;
    }

    .preview-placeholder {
      font-size: 0.8rem;
      color: var(--muted);
      text-align: center;
    }

    .thumbs-wrapper {
      margin-top: 8px;
      padding: 8px;
      border-radius: 10px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(55, 65, 81, 0.9);
      max-height: 110px;
      overflow-x: auto;
      overflow-y: hidden;
      display: none;
    }

    .thumbs-header {
      font-size: 0.75rem;
      color: var(--muted);
      margin-bottom: 4px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .thumbs-grid {
      display: flex;
      gap: 6px;
    }

    .thumb-item {
      position: relative;
      flex: 0 0 auto;
      border-radius: 8px;
      overflow: hidden;
      border: 1px solid transparent;
      cursor: pointer;
      transition: transform 0.1s ease, border-color 0.12s ease, box-shadow 0.12s ease;
    }

    .thumb-item img {
      display: block;
      height: 64px;
      width: auto;
    }

    .thumb-item:hover {
      transform: translateY(-1px) scale(1.02);
      border-color: rgba(148, 163, 184, 0.7);
    }

    .thumb-item.active {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.7);
    }

    .thumbs-placeholder {
      font-size: 0.75rem;
      color: var(--muted);
    }

    .error-text {
      color: var(--danger);
      font-size: 0.8rem;
      margin-top: 4px;
      min-height: 1em;
    }

    .buttons-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: flex-end;
      margin-top: 6px;
    }

    .btn {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 1);
      padding: 6px 12px;
      font-size: 0.8rem;
      color: var(--text);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition:
        background 0.15s ease,
        border-color 0.15s ease,
        transform 0.06s ease,
        box-shadow 0.12s ease;
    }

    .btn.primary {
      background: linear-gradient(135deg, #0ea5e9, #22c55e);
      border-color: rgba(34, 197, 94, 0.6);
      color: #0b1120;
      font-weight: 600;
    }

    .btn.small {
      padding: 4px 9px;
      font-size: 0.76rem;
    }

    .btn:hover {
      transform: translateY(-1px);
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.3);
    }

    .btn.primary:hover {
      filter: brightness(1.05);
    }

    .b64-cards-container {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .b64-card {
      border-radius: 12px;
      border: 1px solid rgba(75, 85, 99, 0.9);
      background: rgba(15, 23, 42, 0.98);
      padding: 8px 10px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      animation: cardIn 0.3s ease-out;
    }

    .b64-card-header {
      font-size: 0.8rem;
      color: var(--muted);
      display: flex;
      justify-content: space-between;
      gap: 8px;
      flex-wrap: wrap;
    }

    .b64-card-header strong {
      color: var(--text);
      font-weight: 500;
    }

    .b64-card textarea {
      width: 100%;
      min-height: 120px;
      max-height: 200px;
      border-radius: 10px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: rgba(15, 23, 42, 0.95);
      color: var(--text);
      font-size: 0.78rem;
      padding: 6px 7px;
      resize: vertical;
      outline: none;
    }

    .b64-card textarea:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.4);
    }

    .b64-card-buttons {
      display: flex;
      gap: 6px;
      justify-content: flex-end;
      flex-wrap: wrap;
    }

    .download-all-row {
      margin-top: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.78rem;
      color: var(--muted);
      gap: 8px;
      flex-wrap: wrap;
    }

    .hidden {
      display: none !important;
    }

    .single-b64-textarea {
      width: 100%;
      min-height: 180px;
      max-height: 400px;
      border-radius: 12px;
      border: 1px solid rgba(75, 85, 99, 0.8);
      background: rgba(15, 23, 42, 0.92);
      color: var(--text);
      padding: 10px 11px;
      font-size: 0.8rem;
      resize: vertical;
      outline: none;
    }

    .single-b64-textarea:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.4);
    }

    .disabled {
      opacity: 0.4;
      pointer-events: none;
    }

    .b64-info {
      font-size: 0.75rem;
      color: var(--muted);
      margin-top: 4px;
      min-height: 1em;
    }

    .panel-tip {
      font-size: 0.75rem;
      color: var(--muted);
      margin: 2px 0 6px;
    }

    .pro-section {
      margin-top: 22px;
      padding: 14px 16px;
      border-radius: 18px;
      background: radial-gradient(circle at top left, rgba(56, 189, 248, 0.18) 0, #020617 55%);
      border: 1px dashed rgba(56, 189, 248, 0.7);
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      align-items: center;
    }

    .pro-main {
      flex: 2;
      min-width: 210px;
    }

    .pro-main-title {
      font-size: 0.9rem;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .pro-main-sub {
      font-size: 0.78rem;
      color: var(--muted);
    }

    .pro-list {
      flex: 2;
      min-width: 210px;
      font-size: 0.78rem;
      color: var(--muted);
    }

    .pro-list ul {
      margin: 0;
      padding-left: 16px;
    }

    .pro-cta {
      flex: 1;
      min-width: 160px;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 6px;
    }

    .pro-tag {
      font-size: 0.7rem;
      color: #fde68a;
    }

    footer {
      margin-top: 18px;
      font-size: 0.75rem;
      color: var(--muted);
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 6px;
      opacity: 0.75;
    }
  </style>
</head>
<body>
  <div class="container">
    <header class="header">
      <div class="title-row">
        <h1>
          Image ‚áÜ Base64
          <span class="logo-pill">Utility</span>
        </h1>
        <span class="pill-badge">No upload ‚Ä¢ All in your browser</span>
      </div>
      <p class="subtitle">
        Convert images to Base64 or Base64 back to images ‚Äì with resizing, watermark, multi-image support and more.
        Everything is processed locally in your browser.
      </p>
      <p class="header-tagline">
        Built for developers & designers ‚Ä¢ Free, fast & private.
      </p>

      <div class="features-list">
        <span>Multiple images in one go</span>
        <span>Advanced resize & watermark</span>
        <span>Copy & download friendly outputs</span>
      </div>

      <div class="waitlist-wrapper">
        <div class="waitlist-text">
          <strong>Pro version is coming soon.</strong><br />
          Get early access to <span>batch ZIP download</span>, <span>Chrome / VSCode extensions</span> and more.
        </div>
        <form
          class="waitlist-form"
          action="https://formsubmit.co/yakirpinchas92@gmail.com"
          method="POST"
          target="_blank"
        >
          <input type="hidden" name="_subject" value="Image2Base64 Pro ‚Äì Waitlist signup" />
          <input type="hidden" name="_captcha" value="false" />
          <input type="hidden" name="_template" value="table" />
          <input
            type="email"
            name="email"
            class="waitlist-input"
            placeholder="Enter your email for early access"
            required
          />
          <button class="btn primary small" type="submit">Join waitlist</button>
        </form>
      </div>
      <div class="waitlist-small">
        Free forever for basic use. Pro will be optional for power users only.
      </div>
    </header>

    <div class="mode-toggle">
      <button class="mode-button active" id="modeImageToBase64">üñºÔ∏è Image ‚Üí Base64</button>
      <button class="mode-button" id="modeBase64ToImage">üî° Base64 ‚Üí Image</button>
    </div>

    <div class="grid">
      <div class="card">
        <div class="card-header">
          <div id="leftTitle">Upload image(s)</div>
          <small id="leftHint">Select one or multiple images</small>
        </div>

        <div class="upload-area" id="uploadArea">
          <p><strong>Click to select image(s)</strong> or drop them here</p>
        </div>

        <input type="file" id="fileInput" accept="image/*,.svg,.svgz" multiple style="display:none;" />

        <div class="options-row" id="optionsRow">
          <div class="option">
            <label for="formatSelect">Output format</label>
            <select id="formatSelect">
              <option value="original">Original</option>
              <option value="png">PNG</option>
              <option value="jpeg">JPG</option>
              <option value="webp">WEBP</option>
            </select>
          </div>

          <div class="option">
            <label for="qualityRange">
              Quality <span id="qualityValue">90%</span>
            </label>
            <input type="range" id="qualityRange" min="10" max="100" value="90" />
          </div>
          
          <div class="option" style="min-width: 150px; display: flex; align-items: flex-end; padding-bottom: 4px;">
            <input
              type="checkbox"
              id="base64OnlyCheckbox"
              style="margin-right: 8px; transform: scale(1.15); accent-color: var(--accent);"
            />
            <label for="base64OnlyCheckbox" style="margin-bottom: 0; font-size: 0.86rem; color: var(--text);">
              Base64 Only
            </label>
          </div>
          <div class="advanced-toggle">
            <button class="btn small" id="toggleAdvancedBtn" type="button">More options</button>
          </div>
        </div>

        <div class="advanced-options" id="advancedOptions">
          <div class="option">
            <label for="resizeMode">Resize mode</label>
            <select id="resizeMode" class="advanced-small-input">
              <option value="original">Original size</option>
              <option value="fit">Fit within (keep ratio)</option>
              <option value="exact">Exact size</option>
              <option value="up2">Upscale 2√ó</option>
            </select>
          </div>
          <div class="option">
            <label>Width / height (px)</label>
            <div style="display:flex; gap:6px;">
              <input type="number" id="resizeWidth" class="advanced-small-input" placeholder="Width" min="1" />
              <input type="number" id="resizeHeight" class="advanced-small-input" placeholder="Height" min="1" />
            </div>
          </div>
          <div class="option">
            <label for="watermarkText">Watermark (optional)</label>
            <input
              type="text"
              id="watermarkText"
              class="advanced-small-input"
              placeholder="e.g. yakirpinchas.github.io/image2base64"
            />
          </div>
        </div>

        <div class="preview-wrapper">
          <div class="preview-placeholder" id="previewPlaceholder">No image selected yet.</div>
          <img id="previewImage" alt="Preview" style="display:none;" />
        </div>

        <div class="thumbs-wrapper" id="thumbsWrapper">
          <div class="thumbs-header">
            <span>Thumbnails</span>
            <span id="thumbsCountLabel"></span>
          </div>
          <div class="thumbs-placeholder" id="thumbsPlaceholder">
            Thumbnails will appear here after selecting images.
          </div>
          <div class="thumbs-grid" id="thumbsGrid"></div>
        </div>

        <div class="error-text" id="leftError"></div>
      </div>

      <div class="card">
        <div id="panelImageToBase64">
          <div class="card-header">
            <div>Base64 output (per image)</div>
            <small>Each image gets its own block</small>
          </div>
          <p class="panel-tip">
            Tip: Perfect for embedding inline images in HTML, CSS, JSON or emails.
          </p>

          <div id="cardsContainer" class="b64-cards-container"></div>

          <div class="download-all-row" id="downloadAllRow">
            <span id="imagesSummaryText">No images yet.</span>
            <div style="display:flex; gap:6px;">
              <button class="btn small" id="copyAllBtn">Copy all</button>
              <button class="btn small" id="downloadAllBtn">Download all as .txt</button>
            </div>
          </div>

          <div class="error-text" id="rightErrorImg"></div>
        </div>

        <div id="panelBase64ToImage" class="hidden">
          <div class="card-header">
            <div>Base64 input</div>
            <small>Paste Base64 to preview</small>
          </div>

          <textarea
            id="singleBase64Input"
            class="single-b64-textarea"
            placeholder="Paste your Base64 string here (with or without data:image/...;base64,)"
          ></textarea>

          <div class="preview-wrapper" id="previewWrapperB64">
            <div class="preview-placeholder" id="previewPlaceholderB64">
              Image preview will appear here.
            </div>
            <img id="previewImageB64" alt="Preview from Base64" style="display:none;" />
          </div>
          <div class="b64-info" id="b64InfoText"></div>

          <div class="buttons-row">
            <button class="btn small" id="singleClearBtn">Clear</button>
            <button class="btn small" id="singleCopyBtn">Copy</button>
            <button class="btn primary small" id="singleDownloadImageBtn">Download image</button>
          </div>

          <div class="error-text" id="rightErrorB64"></div>
        </div>
      </div>
    </div>

    <section class="pro-section">
      <div class="pro-main">
        <div class="pro-main-title">Image2Base64 Pro (coming soon)</div>
        <div class="pro-main-sub">
          For power users who work with images daily ‚Äì agencies, frontend teams, designers and automation lovers.
        </div>
      </div>
      <div class="pro-list">
        <ul>
          <li>Batch convert & download everything as a single ZIP</li>
          <li>Extra compression & smart presets</li>
          <li>Chrome / VSCode extensions for 1-click conversion</li>
          <li>Simple API for scripts & CI pipelines</li>
        </ul>
      </div>
      <div class="pro-cta">
        <span class="pro-tag">Soon: affordable lifetime & monthly plans</span>
        <button class="btn small" type="button" onclick="window.scrollTo({top:0,behavior:'smooth'})">
          Join waitlist above
        </button>
      </div>
    </section>
    
    <div class="seo-text" style="margin-top: 30px; padding-top: 20px; border-top: 1px solid rgba(55, 65, 81, 0.7);">
      <h2 style="font-size: 1.2rem; color: var(--accent); margin-bottom: 8px;">What is Base64 and Why Convert Images?</h2>
      <p style="font-size: 0.8rem; color: var(--muted); margin-bottom: 12px; line-height: 1.5;">
        Base64 is a binary-to-text encoding scheme that converts binary data (like images) into a sequence of ASCII characters.
        This is commonly used in web development and programming to embed image data directly into files like HTML, CSS, or JSON,
        avoiding external HTTP requests. Converting small icons or design elements to Base64 speeds up website loading times by
        reducing the number of server calls. Our <strong>free Image to Base64 Converter</strong> is fast and secure because
        <strong>all processing is done locally in your browser</strong>, ensuring your files are never uploaded to any server.
      </p>
      <h3 style="font-size: 1rem; color: var(--muted); margin-bottom: 6px;">Key Benefits for Developers & Designers</h3>
      <ul style="font-size: 0.8rem; color: var(--muted); padding-left: 20px; margin-top: 0; line-height: 1.5;">
        <li><strong>Performance:</strong> Embed small images directly into stylesheets to eliminate HTTP requests and improve load time.</li>
        <li><strong>Advanced Features:</strong> Utilize built-in tools for <strong>resizing</strong>, <strong>quality control</strong>, and <strong>watermarking</strong> before conversion.</li>
        <li><strong>Privacy:</strong> Enjoy maximum security with our "No Upload" guarantee for all conversions.</li>
        <li><strong>Multi-Image Support:</strong> Easily convert multiple files in a single batch, and copy or download all results at once.</li>
      </ul>
    </div>

    <footer>
      <span>Runs fully in your browser ‚Äì no files are uploaded.</span>
      <span>
        Made with ‚ù§Ô∏è by Yakir ‚Ä¢
        <a
          href="https://github.com/yakirpinchas/image2base64"
          target="_blank"
          rel="noopener noreferrer"
          style="color: var(--accent); text-decoration: none;"
        >
          GitHub
        </a>
      </span>
    </footer>
  </div>

  <script>
    const modeImageToBase64Btn = document.getElementById("modeImageToBase64");
    const modeBase64ToImageBtn = document.getElementById("modeBase64ToImage");
    const uploadArea = document.getElementById("uploadArea");
    const fileInput = document.getElementById("fileInput");
    const previewImage = document.getElementById("previewImage");
    const previewPlaceholder = document.getElementById("previewPlaceholder");
    const thumbsWrapper = document.getElementById("thumbsWrapper");
    const thumbsGrid = document.getElementById("thumbsGrid");
    const thumbsPlaceholder = document.getElementById("thumbsPlaceholder");
    const thumbsCountLabel = document.getElementById("thumbsCountLabel");
    const leftError = document.getElementById("leftError");
    const formatSelect = document.getElementById("formatSelect");
    const qualityRange = document.getElementById("qualityRange");
    const qualityValue = document.getElementById("qualityValue");
    const base64OnlyCheckbox = document.getElementById("base64OnlyCheckbox"); 
    const optionsRow = document.getElementById("optionsRow");
    const toggleAdvancedBtn = document.getElementById("toggleAdvancedBtn");
    const advancedOptions = document.getElementById("advancedOptions");
    const resizeModeSelect = document.getElementById("resizeMode");
    const resizeWidthInput = document.getElementById("resizeWidth");
    const resizeHeightInput = document.getElementById("resizeHeight");
    const watermarkTextInput = document.getElementById("watermarkText");
    const panelImageToBase64 = document.getElementById("panelImageToBase64");
    const panelBase64ToImage = document.getElementById("panelBase64ToImage");
    const cardsContainer = document.getElementById("cardsContainer");
    const downloadAllRow = document.getElementById("downloadAllRow");
    const downloadAllBtn = document.getElementById("downloadAllBtn");
    const copyAllBtn = document.getElementById("copyAllBtn");
    const imagesSummaryText = document.getElementById("imagesSummaryText");
    const rightErrorImg = document.getElementById("rightErrorImg");
    const singleBase64Input = document.getElementById("singleBase64Input");
    const previewImageB64 = document.getElementById("previewImageB64");
    const previewPlaceholderB64 = document.getElementById("previewPlaceholderB64");
    const singleClearBtn = document.getElementById("singleClearBtn");
    const singleCopyBtn = document.getElementById("singleCopyBtn");
    const singleDownloadImageBtn = document.getElementById("singleDownloadImageBtn");
    const rightErrorB64 = document.getElementById("rightErrorB64");
    const b64InfoText = document.getElementById("b64InfoText");

    let currentMode = "imageToBase64";
    let lastFiles = null;
    let currentImageDataUrl = "";
    let imageItems = []; // { index, name, base64, dataUrl }
    let currentPreviewIndex = -1;

    function setMode(mode) {
      currentMode = mode;
      leftError.textContent = "";
      rightErrorImg.textContent = "";
      rightErrorImg.style.color = "#f97373";
      rightErrorB64.textContent = "";
      rightErrorB64.style.color = "#f97373";
      b64InfoText.textContent = "";
      previewImage.classList.remove("zoomed");
      previewImageB64.classList.remove("zoomed");
      previewImage.style.display = "none";
      previewImage.src = "";
      previewPlaceholder.style.display = "block";
      currentPreviewIndex = -1;
      thumbsGrid.innerHTML = "";
      thumbsPlaceholder.style.display = "block";
      thumbsCountLabel.textContent = "";
      thumbsWrapper.style.display = "none";
      previewImageB64.style.display = "none";
      previewImageB64.src = "";
      previewPlaceholderB64.style.display = "block";

      if (mode === "imageToBase64") {
        modeImageToBase64Btn.classList.add("active");
        modeBase64ToImageBtn.classList.remove("active");
        document.getElementById("leftTitle").textContent = "Upload image(s)";
        document.getElementById("leftHint").textContent = "Select one or multiple images";
        panelImageToBase64.classList.remove("hidden");
        panelBase64ToImage.classList.add("hidden");
        optionsRow.classList.remove("disabled");
        uploadArea.style.pointerEvents = "auto";
        fileInput.disabled = false;
      } else {
        modeImageToBase64Btn.classList.remove("active");
        modeBase64ToImageBtn.classList.add("active");
        document.getElementById("leftTitle").textContent = "Base64 input";
        document.getElementById("leftHint").textContent = "Paste Base64 to render image";
        panelImageToBase64.classList.add("hidden");
        panelBase64ToImage.classList.remove("hidden");
        optionsRow.classList.add("disabled");
        uploadArea.style.pointerEvents = "none";
        fileInput.disabled = true;
        imageItems = [];
        renderCards();
      }
    }

    modeImageToBase64Btn.addEventListener("click", () => setMode("imageToBase64"));
    modeBase64ToImageBtn.addEventListener("click", () => setMode("base64ToImage"));

    toggleAdvancedBtn.addEventListener("click", () => {
      advancedOptions.classList.toggle("visible");
      toggleAdvancedBtn.textContent = advancedOptions.classList.contains("visible")
        ? "Less options"
        : "More options";
    });

    uploadArea.addEventListener("click", () => {
      if (currentMode === "imageToBase64") {
        fileInput.click();
      }
    });

    uploadArea.addEventListener("dragover", (e) => {
      if (currentMode === "imageToBase64") {
        e.preventDefault();
        uploadArea.style.borderColor = varCss("accent");
        uploadArea.style.boxShadow = "0 0 0 1px rgba(56, 189, 248, 0.25)";
      }
    });

    uploadArea.addEventListener("dragleave", () => {
      if (currentMode === "imageToBase64") {
        uploadArea.style.borderColor = "rgba(148, 163, 184, 0.7)";
        uploadArea.style.boxShadow = "none";
      }
    });

    uploadArea.addEventListener("drop", (e) => {
      uploadArea.style.borderColor = "rgba(148, 163, 184, 0.7)";
      uploadArea.style.boxShadow = "none";
      if (currentMode !== "imageToBase64") return;
      e.preventDefault();
      if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {
        handleFiles(e.dataTransfer.files);
      }
    });

    fileInput.addEventListener("change", () => {
      if (fileInput.files && fileInput.files.length > 0) {
        handleFiles(fileInput.files);
      }
    });

    function handleFiles(fileList) {
      leftError.textContent = "";
      rightErrorImg.textContent = "";
      rightErrorImg.style.color = "#f97373";
      previewImage.style.display = "none";
      previewImage.src = "";
      previewPlaceholder.style.display = "block";
      currentPreviewIndex = -1;
      previewImage.classList.remove("zoomed");
      thumbsGrid.innerHTML = "";
      thumbsPlaceholder.style.display = "block";
      thumbsCountLabel.textContent = "";
      thumbsWrapper.style.display = "none";

      const files = Array.from(fileList).filter((f) => {
        if (f.type && f.type.startsWith("image/")) return true;
        const name = (f.name || "").toLowerCase();
        return /\.(png|jpe?g|webp|gif|bmp|svg|svgz)$/i.test(name);
      });

      if (files.length === 0) {
        leftError.textContent = "Please select one or more valid image files.";
        imageItems = [];
        renderCards();
        return;
      }

      lastFiles = files;
      imageItems = [];

      if (files.length === 1) {
        previewPlaceholder.textContent = "Preview of: " + files[0].name;
      } else {
        previewPlaceholder.textContent = `Multiple images selected (${files.length}). Previewing first one.`;
      }

      let processedCount = 0;
      files.forEach((file, index) => {
        processSingleFile(file, (base64, dataUrl) => {
          if (base64 && dataUrl) {
            imageItems.push({
              index,
              name: file.name,
              base64,
              dataUrl,
            });
          }
          processedCount++;
          if (processedCount === files.length) {
            imageItems.sort((a, b) => a.index - b.index);
            renderCards();
            renderThumbnails();
            if (imageItems.length > 0) {
              setActivePreview(0);
            }
          }
        });
      });
    }

    function processSingleFile(file, callback) {
      const isImageByType = file.type && file.type.startsWith("image/");
      const isImageByName = (file.name || "").toLowerCase().match(/\.(png|jpe?g|webp|gif|bmp|svg|svgz)$/i);

      if (!isImageByType && !isImageByName) {
        callback(null, null);
        return;
      }

      const reader = new FileReader();
      reader.onload = (event) => {
        const originalDataUrl = event.target.result;
        const chosenFormat = formatSelect.value;
        const quality = Number(qualityRange.value) / 100;

        if (
          chosenFormat === "original" ||
          (typeof file.type === "string" && file.type === "image/svg+xml") ||
          /\.svgz?$/i.test(file.name || "")
        ) {
          const base64String = (originalDataUrl.split(",")[1] || "").trim();
          callback(base64String, originalDataUrl);
          return;
        }

        const img = new Image();
        img.onload = () => {
          try {
            const mode = resizeModeSelect.value;
            let targetW = img.width;
            let targetH = img.height;

            const maxW = Number(resizeWidthInput.value) || 0;
            const maxH = Number(resizeHeightInput.value) || 0;

            if (mode === "fit" && (maxW > 0 || maxH > 0)) {
              let scale = 1;
              if (maxW > 0 && img.width > maxW) {
                scale = maxW / img.width;
              }
              if (maxH > 0 && img.height * scale > maxH) {
                scale = maxH / img.height;
              }
              targetW = Math.round(img.width * scale);
              targetH = Math.round(img.height * scale);
            } else if (mode === "exact" && maxW > 0 && maxH > 0) {
              targetW = maxW;
              targetH = maxH;
            } else if (mode === "up2") {
              targetW = img.width * 2;
              targetH = img.height * 2;
            }

            const canvas = document.createElement("canvas");
            canvas.width = targetW;
            canvas.height = targetH;
            const ctx = canvas.getContext("2d");
            ctx.drawImage(img, 0, 0, targetW, targetH);

            const watermark = watermarkTextInput.value.trim();
            if (watermark) {
              const padding = Math.max(8, targetW * 0.015);
              const fontSize = Math.max(14, Math.round(targetW * 0.035));
              ctx.font = `${fontSize}px system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif`;
              ctx.textBaseline = "bottom";
              const metrics = ctx.measureText(watermark);
              const boxW = metrics.width + padding * 2;
              const boxH = fontSize + padding;
              const x = targetW - boxW - padding;
              const y = targetH - padding;
              ctx.fillStyle = "rgba(15, 23, 42, 0.65)";
              ctx.fillRect(x, y - boxH, boxW, boxH);
              ctx.fillStyle = "rgba(248, 250, 252, 0.95)";
              ctx.fillText(watermark, x + padding, y - padding * 0.2);
            }

            let mime = "image/png";
            if (chosenFormat === "jpeg") mime = "image/jpeg";
            else if (chosenFormat === "webp") mime = "image/webp";

            const dataUrl = canvas.toDataURL(mime, quality);
            const base64String = (dataUrl.split(",")[1] || "").trim();
            callback(base64String, dataUrl);
          } catch (err) {
            leftError.textContent = "Failed to process image: " + file.name;
            callback(null, null);
          }
        };

        img.onerror = () => {
          leftError.textContent = "Could not load image data for: " + file.name;
          callback(null, null);
        };

        img.src = originalDataUrl;
      };

      reader.onerror = () => {
        leftError.textContent = "Failed to read file: " + file.name;
        callback(null, null);
      };
      reader.readAsDataURL(file);
    }

    function renderCards() {
      cardsContainer.innerHTML = "";
      rightErrorImg.textContent = "";
      rightErrorImg.style.color = "#f97373";
      
      const isBase64Only = base64OnlyCheckbox.checked;

      if (!imageItems || imageItems.length === 0) {
        imagesSummaryText.textContent = "No images yet.";
        downloadAllRow.classList.add("disabled");
        return;
      }

      imagesSummaryText.textContent = `${imageItems.length} image${imageItems.length > 1 ? "s" : ""} converted.`;
      downloadAllRow.classList.remove("disabled");

      imageItems.forEach((item) => {
        const card = document.createElement("div");
        card.className = "b64-card";

        const header = document.createElement("div");
        header.className = "b64-card-header";
        const leftSpan = document.createElement("span");
        leftSpan.innerHTML = `Base64 for: <strong>${item.name}</strong>`;
        const rightSpan = document.createElement("span");
        rightSpan.innerHTML = `Size: ${Math.round(item.base64.length / 1024)} KB`;
        header.appendChild(leftSpan);
        header.appendChild(rightSpan);

        const textarea = document.createElement("textarea");
        const mimeHeader = isBase64Only ? "" : `data:${getDataUrlMime(item.dataUrl)};base64,`;
        textarea.value = mimeHeader + item.base64;
        textarea.readOnly = true;

        const buttonsRow = document.createElement("div");
        buttonsRow.className = "b64-card-buttons";

        const copyBtn = document.createElement("button");
        copyBtn.className = "btn small";
        copyBtn.textContent = "Copy to clipboard";
        copyBtn.addEventListener("click", async () => {
          rightErrorImg.textContent = "";
          rightErrorImg.style.color = "#f97373";
          if (!textarea.value.trim()) return;

          try {
            await navigator.clipboard.writeText(textarea.value);
            rightErrorImg.style.color = "#4ade80";
            rightErrorImg.textContent = `Copied Base64 for ${item.name}`;
            setTimeout(() => {
              rightErrorImg.textContent = "";
              rightErrorImg.style.color = "#f97373";
            }, 1500);
          } catch {
            rightErrorImg.textContent = "Clipboard not available in this browser.";
          }
        });

        const downloadTxtBtn = document.createElement("button");
        downloadTxtBtn.className = "btn small";
        downloadTxtBtn.textContent = "Download .txt";
        downloadTxtBtn.addEventListener("click", () => {
          if (!textarea.value.trim()) return;
          const blob = new Blob([textarea.value.trim()], { type: "text/plain;charset=utf-8" });
          const url = URL.createObjectURL(blob);
          const link = document.createElement("a");
          link.href = url;
          const safeName = item.name.replace(/[^a-z0-9_\-\.]/gi, "_");
          link.download = `${safeName || "image"}-base64.txt`;
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
          URL.revokeObjectURL(url);
        });

        // NEW: Download image button for Image ‚Üí Base64
        const downloadImageBtn = document.createElement("button");
        downloadImageBtn.className = "btn primary small";
        downloadImageBtn.textContent = "Download image";
        downloadImageBtn.addEventListener("click", () => {
          rightErrorImg.textContent = "";
          rightErrorImg.style.color = "#f97373";
          if (!item.dataUrl) {
            rightErrorImg.textContent = "No image data to download.";
            return;
          }

          const blob = dataUrlToBlob(item.dataUrl);
          if (!blob) {
            rightErrorImg.textContent = "Could not prepare image for download.";
            return;
          }

          const mime = getDataUrlMime(item.dataUrl);
          let ext = "png";
          if (mime === "image/jpeg") ext = "jpg";
          else if (mime === "image/webp") ext = "webp";
          else if (mime === "image/gif") ext = "gif";

          const url = URL.createObjectURL(blob);
          const link = document.createElement("a");
          const safeName = item.name.replace(/[^a-z0-9_\-\.]/gi, "_") || "image";
          link.href = url;
          link.download = `${safeName}-converted.${ext}`;
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
          URL.revokeObjectURL(url);
        });

        buttonsRow.appendChild(copyBtn);
        buttonsRow.appendChild(downloadTxtBtn);
        buttonsRow.appendChild(downloadImageBtn);

        card.appendChild(header);
        card.appendChild(textarea);
        card.appendChild(buttonsRow);
        cardsContainer.appendChild(card);
      });
    }

    function renderThumbnails() {
      thumbsGrid.innerHTML = "";
      if (!imageItems || imageItems.length === 0) {
        thumbsWrapper.style.display = "none";
        return;
      }

      thumbsWrapper.style.display = "block";
      thumbsPlaceholder.style.display = "none";
      thumbsCountLabel.textContent = `${imageItems.length} image${imageItems.length > 1 ? "s" : ""}`;

      imageItems.forEach((item, index) => {
        const thumbItem = document.createElement("div");
        thumbItem.className = "thumb-item";
        const img = document.createElement("img");
        img.src = item.dataUrl;
        img.alt = item.name;
        thumbItem.appendChild(img);
        thumbItem.addEventListener("click", () => {
          setActivePreview(index);
        });
        thumbsGrid.appendChild(thumbItem);
      });
    }

    function setActivePreview(index) {
      if (!imageItems[index]) return;
      currentPreviewIndex = index;
      const item = imageItems[index];
      currentImageDataUrl = item.dataUrl;
      previewImage.src = currentImageDataUrl;
      previewImage.style.display = "block";
      previewPlaceholder.style.display = "none";
      previewImage.classList.remove("zoomed");

      Array.from(thumbsGrid.children).forEach((el, i) => {
        if (i === index) el.classList.add("active");
        else el.classList.remove("active");
      });
    }

    function debounce(fn, delay) {
      let timeout;
      return (...args) => {
        clearTimeout(timeout);
        timeout = setTimeout(() => fn(...args), delay);
      };
    }

    const reprocessImages = () => {
      if (currentMode === "imageToBase64" && lastFiles && lastFiles.length > 0) {
        handleFiles(lastFiles);
      }
    };

    const debouncedReprocess = debounce(reprocessImages, 350);

    qualityRange.addEventListener("input", () => {
      qualityValue.textContent = qualityRange.value + "%";
      debouncedReprocess();
    });

    formatSelect.addEventListener("change", () => {
      debouncedReprocess();
    });
    
    base64OnlyCheckbox.addEventListener("change", () => {
      if (currentMode === "imageToBase64" && imageItems.length > 0) {
        renderCards();
      }
    });

    resizeModeSelect.addEventListener("change", () => {
      debouncedReprocess();
    });

    resizeWidthInput.addEventListener("input", () => {
      debouncedReprocess();
    });

    resizeHeightInput.addEventListener("input", () => {
      debouncedReprocess();
    });

    watermarkTextInput.addEventListener("input", () => {
      debouncedReprocess();
    });

    downloadAllBtn.addEventListener("click", () => {
      rightErrorImg.textContent = "";
      rightErrorImg.style.color = "#f97373";
      if (!imageItems || imageItems.length === 0) {
        rightErrorImg.textContent = "Nothing to download. Please upload image(s) first.";
        return;
      }
      
      const isBase64Only = base64OnlyCheckbox.checked;
      let content = "";
      imageItems.forEach((item) => {
        const mimeHeader = isBase64Only ? "" : `data:${getDataUrlMime(item.dataUrl)};base64,`;
        content += `// ${item.name}\n${mimeHeader}${item.base64}\n\n`;
      });

      const blob = new Blob([content.trim()], { type: "text/plain;charset=utf-8" });
      const url = URL.createObjectURL(blob);
      const link = document.createElement("a");
      link.href = url;
      link.download = `images-base64-all.txt`;
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      URL.revokeObjectURL(url);
    });

    copyAllBtn.addEventListener("click", async () => {
      rightErrorImg.textContent = "";
      rightErrorImg.style.color = "#f97373";
      if (!imageItems || imageItems.length === 0) {
        rightErrorImg.textContent = "Nothing to copy. Please upload image(s) first.";
        return;
      }
      
      const isBase64Only = base64OnlyCheckbox.checked;
      let content = "";
      imageItems.forEach((item) => {
        const mimeHeader = isBase64Only ? "" : `data:${getDataUrlMime(item.dataUrl)};base64,`;
        content += `// ${item.name}\n${mimeHeader}${item.base64}\n\n`;
      });

      try {
        await navigator.clipboard.writeText(content.trim());
        rightErrorImg.style.color = "#4ade80";
        rightErrorImg.textContent = `${imageItems.length} Base64 blocks copied.`;
        setTimeout(() => {
          rightErrorImg.textContent = "";
          rightErrorImg.style.color = "#f97373";
        }, 2000);
      } catch {
        rightErrorImg.textContent = "Clipboard not available in this browser.";
      }
    });

    function dataUrlToBlob(dataUrl) {
      const parts = dataUrl.split(",");
      if (parts.length < 2) return null;

      const mimeMatch = parts[0].match(/data:(.*?);base64/);
      const mime = mimeMatch ? mimeMatch[1] : "image/png";

      const bstr = atob(parts[1]);
      let n = bstr.length;
      const u8arr = new Uint8Array(n);

      while (n--) {
        u8arr[n] = bstr.charCodeAt(n);
      }
      return new Blob([u8arr], { type: mime });
    }

    function getDataUrlMime(dataUrl) {
      const match = dataUrl.match(/data:(.*?);base64/);
      return match ? match[1] : 'image/png';
    }

    function varCss(name) {
      return getComputedStyle(document.documentElement).getPropertyValue(`--${name}`);
    }

    previewImage.addEventListener("click", () => {
      previewImage.classList.toggle("zoomed");
    });
    previewImageB64.addEventListener("click", () => {
      previewImageB64.classList.toggle("zoomed");
    });

    singleClearBtn.addEventListener("click", () => {
      singleBase64Input.value = "";
      rightErrorB64.textContent = "";
      rightErrorB64.style.color = "#f97373";
      b64InfoText.textContent = "";
      currentImageDataUrl = "";
      previewImageB64.src = "";
      previewImageB64.style.display = "none";
      previewPlaceholderB64.style.display = "block";
      previewImageB64.classList.remove("zoomed");
    });

    singleCopyBtn.addEventListener("click", async () => {
      rightErrorB64.textContent = "";
      rightErrorB64.style.color = "#f97373";
      const val = singleBase64Input.value.trim();
      if (!val) {
        rightErrorB64.textContent = "Nothing to copy.";
        return;
      }
      try {
        await navigator.clipboard.writeText(val);
        rightErrorB64.style.color = "#4ade80";
        rightErrorB64.textContent = "Copied Base64.";
        setTimeout(() => {
          rightErrorB64.textContent = "";
          rightErrorB64.style.color = "#f97373";
        }, 1500);
      } catch {
        rightErrorB64.textContent = "Clipboard not available in this browser.";
      }
    });

    singleBase64Input.addEventListener("input", () => {
      rightErrorB64.textContent = "";
      b64InfoText.textContent = "";
      currentImageDataUrl = "";
      previewImageB64.style.display = "none";
      previewImageB64.classList.remove("zoomed");
      previewPlaceholderB64.style.display = "block";

      const base64 = singleBase64Input.value.trim();
      if (!base64) {
        return;
      }

      let dataUrl = base64;
      if (!base64.startsWith("data:")) {
        dataUrl = "data:image/png;base64," + base64;
      }

      const base64Part = dataUrl.split(",")[1] || "";
      if (base64Part.length < 10) {
        rightErrorB64.textContent = "Base64 string is too short/invalid.";
        return;
      }

      const img = new Image();
      img.onload = () => {
        currentImageDataUrl = dataUrl;
        previewImageB64.src = currentImageDataUrl;
        previewImageB64.style.display = "block";
        previewPlaceholderB64.style.display = "none";

        const mime = getDataUrlMime(currentImageDataUrl);
        const kb = Math.round(base64Part.length * 0.75 / 1024); 
        b64InfoText.textContent = `Detected type: ${mime} ‚Ä¢ Approx. size: ${kb} KB`;
      };
      img.onerror = () => {
        rightErrorB64.textContent = "Invalid Base64 string.";
      };
      img.src = dataUrl;
    });

    singleDownloadImageBtn.addEventListener("click", () => {
      rightErrorB64.style.color = "#f97373";
      rightErrorB64.textContent = "";
      if (!currentImageDataUrl) {
        rightErrorB64.textContent = "No image to download. Paste valid Base64 first.";
        return;
      }

      const blob = dataUrlToBlob(currentImageDataUrl);
      if (!blob) {
        rightErrorB64.textContent = "Could not prepare image for download.";
        return;
      }

      const url = URL.createObjectURL(blob);
      const link = document.createElement("a");
      link.href = url;
      link.download = "image-from-base64.png";
      document.body.appendChild(link);
      link.click();
      setTimeout(() => {
        document.body.removeChild(link);
        URL.revokeObjectURL(url);
      }, 0);

      setTimeout(() => {
        try {
          window.open(currentImageDataUrl, "_blank");
        } catch (e) {}
      }, 400);

      rightErrorB64.style.color = "#4ade80";
      rightErrorB64.textContent = "Download initiated.";
      setTimeout(() => {
        rightErrorB64.textContent = "";
        rightErrorB64.style.color = "#f97373";
      }, 1500);
    });

    setMode("imageToBase64");
  </script>
</body>
</html>
